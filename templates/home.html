<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ScamSniff ‚Äî Check a message</title>
  <style>
    :root { --bg:#0f1624; --card:#151d2e; --muted:#94a3b8; --text:#e6edf3; --brand:#3b82f6; --warn:#f59e0b; }
    * { box-sizing: border-box; }
    body { margin:0; font-family: system-ui, Segoe UI, Roboto, Arial, sans-serif; background:var(--bg); color:var(--text); }
    .wrap { max-width:1100px; margin:0 auto; padding:24px; }
    header { display:flex; align-items:center; justify-content:space-between; margin-bottom:18px; }
    h1 { font-size:22px; margin:0; display:flex; gap:8px; align-items:center; }
    nav { display:flex; gap:16px; align-items:center; }
    nav a { color:#8cc7ff; text-decoration:none; }
    .card { background:var(--card); border-radius:14px; padding:16px; }
    .row { display:grid; gap:18px; }
    @media (min-width: 920px){ .row { grid-template-columns: 1fr; } }
    textarea { width:100%; min-height:180px; padding:12px; border:1px solid #243253; border-radius:12px; background:#0b1220; color:#e6edf3; }
    input[type="url"] { width:100%; padding:12px; border:1px solid #243253; border-radius:12px; background:#0b1220; color:#e6edf3; }
    button { border:0; border-radius:10px; padding:10px 14px; font-weight:600; cursor:pointer; }
    .btn { background:#2563eb; color:#fff; }
    .btn:disabled{ opacity:.6; cursor:not-allowed;}
    .btn-outline { background:transparent; border:1px solid #2a3a5a; color:#cbe3ff; }
    .muted { color:var(--muted); font-size:13px; }
    pre { white-space:pre-wrap; background:#0f182a; border:1px solid #243253; border-radius:12px; padding:12px; font-weight:700; }
    .price { font-size:18px; color:#fff; }
    .upgrade-bar { display:flex; gap:10px; align-items:center; }
    .ok,.err { display:none; margin-top:12px; padding:12px; border-radius:12px; }
    .ok { background:#0b3b1b; color:#d6ffea; }
    .err { background:#3b0b0b; color:#ffcdcd; }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>üõ°Ô∏è ScamSniff</h1>
      <nav>
        <a href="/">Home</a>
        <a href="/history">History</a>
        <a href="/pricing">Pricing</a>
        <a class="btn" target="_blank" rel="noopener" href="https://buy.stripe.com/test_aFa4gydxs7JlcsE35D5wI00">Upgrade</a>
      </nav>
    </header>

    <div class="row">
      <section class="card">
        <h2>Analyze a message or listing</h2>
        <p class="muted">Paste text from an email, marketplace chat, or SMS.</p>
        <textarea id="msg" placeholder="Paste message here‚Ä¶"></textarea>
        <div style="display:flex; gap:10px; margin-top:12px;">
          <button id="scanBtn" class="btn">Scan</button>
          <button id="clearBtn" class="btn-outline">Clear</button>
        </div>
        <div id="ok" class="ok"></div>
        <div id="err" class="err"></div>
        <div id="result" class="card" style="margin-top:12px;">
          <div class="muted">Result will appear here.</div>
        </div>
      </section>

      <section class="card">
        <h2>Profile Check</h2>
        <p class="muted">Paste a Facebook, X/Twitter, LinkedIn, Instagram, or TikTok profile URL.</p>
        <input id="profileUrl" type="url" placeholder="https://facebook.com/username"/>
        <div style="display:flex; gap:10px; margin-top:12px;">
          <button id="profileBtn" class="btn">Check profile</button>
        </div>
        <div id="profileOut" class="card" style="margin-top:12px;">
          <div class="muted">Result will appear here.</div>
        </div>
      </section>

      <section class="card">
        <h2>Upgrade</h2>
        <p class="muted">Unlock higher limits and pro features.</p>
        <div class="upgrade-bar">
          <span class="price">$5<span class="muted" style="font-size:16px;">/month</span></span>
          <a class="btn" target="_blank" rel="noopener" href="https://buy.stripe.com/test_aFa4gydxs7JlcsE35D5wI00">Upgrade</a>
        </div>
      </section>
    </div>
  </div>

  <script>
    const $ = (id) => document.getElementById(id);

    $("clearBtn").onclick = () => {
      $("msg").value = "";
      $("result").innerHTML = '<div class="muted">Result will appear here.</div>';
      $("ok").style.display = "none";
      $("err").style.display = "none";
    };

    $("scanBtn").onclick = async () => {
      const text = $("msg").value.trim();
      $("ok").style.display = "none";
      $("err").style.display = "none";
      if (!text) {
        $("err").textContent = "Please paste a message first.";
        $("err").style.display = "block";
        return;
      }
      $("scanBtn").disabled = true;
      try {
        const r = await fetch("/api/analyze", {
          method: "POST",
          headers: {"Content-Type":"application/json"},
          body: JSON.stringify({ message: text })
        });
        const out = await r.json();
        if (!out.ok) throw new Error(out.error || "Error");
        $("result").innerHTML = "<pre>"+JSON.stringify(out, null, 2)+"</pre>";
        $("ok").textContent = "Done.";
        $("ok").style.display = "block";
      } catch (e) {
        $("err").textContent = "Failed: " + e.message;
        $("err").style.display = "block";
      } finally {
        $("scanBtn").disabled = false;
      }
    };

    $("profileBtn").onclick = async () => {
      const url = $("profileUrl").value.trim();
      if (!url) {
        $("profileOut").innerHTML = '<div class="muted">Enter a profile URL.</div>';
        return;
      }
      $("profileBtn").disabled = true;
      try {
        const r = await fetch("/api/social_check", {
          method: "POST",
          headers: {"Content-Type":"application/json"},
          body: JSON.stringify({ url })
        });
        const out = await r.json();
        $("profileOut").innerHTML = "<pre>"+JSON.stringify(out, null, 2)+"</pre>";
      } catch (e) {
        $("profileOut").innerHTML = '<div class="err">Failed: '+e.message+'</div>';
      } finally {
        $("profileBtn").disabled = false;
      }
    };
  </script>
</body>
</html>
